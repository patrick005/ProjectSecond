# GUI 기반 자이로센서 격투 게임 프로젝트 계획서

## 1. 프로젝트 개요

본 프로젝트는 Raspberry Pi를 서버로, 자이로센서를 탑재한 ESP8266을 클라이언트로 활용하여 텍스트 기반 사용자 인터페이스(GUI) 환경에서 1대1 격투 게임을 개발하는 것을 목표로 합니다. 서버는 클라이언트의 연결 관리, 매치 메이킹, 게임 로직 처리, 전적 관리 기능을 수행하며, 클라이언트는 자이로센서 데이터를 서버로 전송하고 서버로부터 게임 상태를 수신하여 GUI로 출력합니다. 서버와 클라이언트 간의 통신은 ZeroMQ를 사용하여 구현하며, 프로젝트 요구 사항에 따라 C, C++, Python 세 가지 언어를 활용하여 각 프로세스를 구축하고 IPC를 구현합니다.

## 2. 개발 필수 반영 사안

1.  **서버-클라이언트 구축:** Raspberry Pi (서버), ESP8266 (클라이언트) 활용
2.  **데이터베이스 저장:** ESP8266에서 수신한 데이터를 서버 측 데이터베이스에 저장
3.  **다중 언어 활용:** C, C++, Python 각 프로세스에서 최소 한 가지 언어 사용
4.  **IPC 구현:** ZMQ를 이용한 프로세스 간 통신 (TCP/IP 기반)
5.  **언어 간 통신:** C, C++, Python으로 작성된 프로세스 간 데이터 교환 가능하도록 구현
6.  **프로젝트 계획 및 일정:** 상기 요구 사항을 만족하는 프로젝트 구상 및 6일간의 개발 일정 수립

## 3. 프로젝트 구상 상세 내용

### 3.1. 게임 개요

* **게임 장르:** 1대1 벨트스크롤 액션 게임 (횡스크롤 기반 상하 이동 가능 필드 고려)
* **조작 방식:** 자이로센서의 움직임을 인식하여 공격 및 방어 액션 수행
    * 아래에서 위로 휘두르기: 방어
    * 좌에서 우로 휘두르기: 공격
* **기본 규칙:**
    * 각 플레이어 기본 체력 10
    * 공격 성공 시 상대방 체력 감소
    * 방어 성공 시 0.2초 동안 공격 패링
    * 0.2초마다 자이로센서 데이터 수신 및 게임 상태 반영

### 3.2. 서버 (Raspberry Pi - Python)

* **클라이언트 연결 관리:**
    * FIFO 기반 매칭 시스템
    * 접속 클라이언트 전적 (승, 패) 및 게임당 통계 (남은 체력, 공격 성공 횟수, 방어 성공 횟수) DB 저장
    * 전적 조회 기능: "0전 0승 0패" 형식 및 상세 컨트롤 지표 출력 (체력 비례 공격/방어 횟수 로직)
* **게임 로직 처리:**
    * 클라이언트로부터 공격/방어 액션 데이터 수신 및 처리
    * 게임 상태 업데이트 (체력 변화, 패링 여부 등)
    * 승패 판정 로직
* **통신:** ZeroMQ를 통해 클라이언트와 통신 (Python ZMQ 라이브러리 활용)
* **데이터베이스:** SQLite 또는 PostgreSQL 사용 고려 (Python DB 라이브러리 활용)
* **GUI:** `curses` 또는 `npyscreen` 라이브러리를 사용하여 서버 상태 및 매칭 정보 등을 시각화

### 3.3. 클라이언트 (ESP8266 - C/C++)

* **자이로센서 데이터 수집:** 자이로센서로부터 각 축의 회전 값 읽기
* **데이터 전송:** ZeroMQ를 통해 수집된 자이로센서 데이터를 서버로 전송 (ESP8266용 ZMQ 라이브러리 활용)
* **통신:** ZeroMQ를 통해 서버와 통신 (C++ ZMQ 라이브러리 활용)

### 3.4. 데이터베이스 (Raspberry Pi)

* 클라이언트 접속 로그 저장 (IP 주소, 접속 시간 등)
* 클라이언트 전적 정보 저장 (닉네임, 승, 패)
* 각 게임별 통계 데이터 저장 (클라이언트 닉네임, 남은 체력, 공격 성공 횟수, 방어 성공 횟수)

### 3.5. 프로세스 간 통신 (IPC - ZMQ)

* 서버 (Python)와 클라이언트 (C/C++) 간 ZeroMQ를 통해 실시간 데이터 교환
* 자이로센서 데이터 (클라이언트 → 서버)
* 게임 상태 정보 (서버 → 클라이언트)

### 3.6. 화면 구성 (서버 GUI)

* **메인 화면:**
    * \[매칭] 메뉴
    * \[클라이언트 닉네임 설정] 메뉴
* **매칭 화면:**
    * 클라이언트 접속 대기 메시지 (2명 접속 시 게임 시작)
    * 게임 시작 카운트다운 (3초)
    * 게임 진행 상황 (각 플레이어 체력 표시 등)
    * 게임 종료 메시지 (승자 표시)
* **클라이언트 닉네임 설정 화면:**
    * 현재 접속 클라이언트 IP 주소 표시
    * 새 닉네임 입력 필드

### 3.7. 1차 개발 목표 (2인용 콘솔 게임)

* 다중 스레딩을 제외하고 2명의 클라이언트가 1:1로 대결 가능한 기본 게임 로직 구현에 집중

## 4. 프로젝트 일정 (6일)

**1일차:**

* 개발 환경 구축 (Raspberry Pi, ESP8266, PlatformIO)
* ESP8266 - 자이로센서 연동 및 데이터 읽기 테스트 (C++)
* Raspberry Pi - ZeroMQ 서버 기본 설정 (Python)
* ESP8266 - ZeroMQ 클라이언트 기본 설정 및 데이터 전송 테스트 (C++)

**2일차:**

* 서버 - 클라이언트 간 ZeroMQ를 이용한 자이로센서 데이터 송수신 구현 (Python, C++)
* Raspberry Pi - SQLite 데이터베이스 연동 및 접속 로그 저장 기능 구현 (Python)
* 클라이언트 접속 관리 (서버 - Python)

**3일차:**

* 서버 - 기본 게임 로직 구현 (체력 관리, 공격/방어 판정 - Python)
* 클라이언트 - 서버로부터 게임 상태 수신 및 기본적인 GUI 출력 (Python `curses` 또는 `npyscreen` 사용 검토)
* 자이로센서 입력에 따른 공격/방어 액션 서버 전송 로직 구현 (ESP8266 - C++)

**4일차:**

* 서버 - 매칭 시스템 (FIFO) 구현 (Python)
* 클라이언트 - GUI 개선 (상태 표시, 매칭 대기 화면 등 - Python)
* 기본적인 승패 판정 로직 구현 (서버 - Python)

**5일차:**

* 서버 - 전적 관리 및 게임 통계 데이터베이스 저장 기능 구현 (Python)
* 서버 - 전적 조회 GUI 기능 구현 (Python)
* 클라이언트 닉네임 설정 기능 구현 (서버 GUI - Python)

**6일차:**

* 전체 시스템 테스트 및 버그 수정
* 코드 정리 및 주석 작성
* 발표 자료 준비

**주의:** 상기 일정은 1차 개발 목표(2인용)를 기준으로 작성되었으며, 다중 스레딩 기능은 포함되지 않았습니다. 실제 개발 진행 상황에 따라 일정은 조정될 수 있습니다.